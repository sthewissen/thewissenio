---
layout: post
title: Creating an encyclopedia page in Xamarin.Forms
wordpress_id: 1249
wordpress_url: https://www.thewissen.io/?p=1249
date: '2019-02-07 14:28:19 +0100'
date_gmt: '2019-02-07 13:28:19 +0100'
categories:
- Code
tags:
- xamarin
- xamarin.forms
- ui
---

<p>If you frequent this blog you probably know I like creating cool-looking stuff in Xamarin.Forms. Since that's what I like doing, why would I stop? So here's another one!</p>

<p>Finding inspiration for one of these can be really simple. There are numerous sites out there like Behance or Dribbble where a lot of creative artists share what they've made. This post is no different. I got the idea for this post from <a rel="noreferrer noopener" aria-label="this awesome looking design (opens in a new tab)" href="https://dribbble.com/shots/4907856-Animals-encyclopedia-app?utm_source=Clipboard_Shot&amp;utm_campaign=coreyliyi&amp;utm_content=Animals%20encyclopedia%20app" target="_blank">this awesome looking design</a> by Yi Li.</p>

<p><!-- wp:image {"id":1254,"align":"center"} --></p>
<div class="wp-block-image">
<figure class="aligncenter"><img src="/images/posts/shot.png" alt="" class="wp-image-1254"/>
*Yi Li's design for an encyclopedia type of app.*

<h3>Bringing it into Xamarin.Forms</h3>
<p>So, how do we manage to get this into <g class="gr_ gr_8 gr-alert gr_gramm gr_inline_cards gr_disable_anim_appear Punctuation multiReplace" id="8" data-gr-id="8">Xamarin.</g>Forms? First, we need to figure out how this should work based on the pictures. I decided to leave the left-most screen out of it and decided the opening screen would be the full-screen picture. When swiping up I'd like to show the other two screens and be able to scroll through them as if they were above one another.</p>


<p>This, however, poses a challenge. The first part of the screen (the cover image) should scroll up and snap into place, whereas the second part just needs to act like a regular scroll. We don't know how long the content will be because it could be dynamic if you were to implement it with actual content.</p>


<p>Most of the other items can be implemented by getting a bit creative with <code>StackLayout</code> and <code>Grid</code> layouts. Or as David Ortinau recently put it in a Twitter conversation we had: by making use of that degree in <code>HorizontalOptions</code> and <code>VerticalOptions</code>.</p>

<p><!-- wp:html --></p>
<p style="text-align:center">
<blockquote class="twitter-tweet" data-conversation="none" data-lang="en">
<p lang="en" dir="ltr">hehe, I know. Still, I want to make it easier and more accessible for people to make nice interaction and animations by default without taking a graduate course in HorizontalOptions/VerticalOptions. :)</p>
<p>&mdash; David Ortinau (@davidortinau) <a href="https://twitter.com/davidortinau/status/1091729516899328001?ref_src=twsrc%5Etfw">February 2, 2019</a></p></blockquote>
<p><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></p>
<p>

<h3>Getting ScrollView to play along</h3>
<p>Like I described earlier the <g class="gr_ gr_12 gr-alert gr_gramm gr_inline_cards gr_run_anim Style multiReplace" id="12" data-gr-id="12">existing </g><code>ScrollView</code><g class="gr_ gr_12 gr-alert gr_gramm gr_inline_cards gr_disable_anim_appear Style multiReplace" id="12" data-gr-id="12"> will</g> not be able to facilitate the behavior we want to implement. The solution I came up with was to not use <g class="gr_ gr_7 gr-alert gr_gramm gr_inline_cards gr_run_anim Grammar multiReplace" id="7" data-gr-id="7">a </g><code>ScrollView</code><g class="gr_ gr_7 gr-alert gr_gramm gr_inline_cards gr_disable_anim_appear Grammar multiReplace" id="7" data-gr-id="7"> at</g> all for the snapping part. Fake it till you make it! </p>


<p>First, we show a full-screen picture. This is a simple full-screen <code>StackLayout</code> with an image in it which is fitted while maintaining the aspect ratio. By adding a <code>GestureRecognizer</code> we can make it so that swiping up triggers a translate animation that moves it out of the screen and moves the content onto the screen. </p>
<script src="https://gist.github.com/sthewissen/b0f35e3c63922cc0e75ba7d1a35962dc.js"></script>
<!-- /wp:html --></p>
<p><!-- wp:html -->
<script src="https://gist.github.com/sthewissen/515fae9900941c3d6a056592f3343f12.js"></script>
<p>The actual content is wrapped in a regular <code>ScrollView</code>, which enables it to be dynamic in height. Most of the other stuff in the content part of this example is done by creatively using <code>StackLayout</code> so you can check that out yourself in the code.</p>

<h3>Garnishing the dish with some animation</h3>
<p>One thing the app does that might be worth mentioning is the little heart icon animation that is played when you press it. This is done using the <a rel="noreferrer noopener" aria-label="Lottie (opens in a new tab)" href="https://airbnb.design/lottie/" target="_blank">Lottie</a> framework, which is a framework that lets you create cross-platform animations in Adobe After Effects. There's a <a rel="noreferrer noopener" aria-label="Xamarin binding (opens in a new tab)" href="https://github.com/martijn00/LottieXamarin" target="_blank">Xamarin binding</a> for this library as well which can be used in Xamarin<g class="gr_ gr_109 gr-alert gr_gramm gr_inline_cards gr_run_anim Style replaceWithoutSep" id="109" data-gr-id="109">.Forms</g> &amp; using it is fairly simple.</p>
<script src="https://gist.github.com/sthewissen/f2cf6cafd753214e85d03b4ad5445320.js"></script>
<!-- /wp:html --></p>
<p><!-- wp:html -->
<script src="https://gist.github.com/sthewissen/a85829d1bbd3e1757a6cbfc1bb5bb711.js"></script>
<p>After adding the NuGet packages and initializing the Lottie framework we can add an <code>AnimationView</code> to our XAML file. This contains a link to the JSON file containing all the details of our animation. These JSON files can be exported from After Effects (out of scope for this post) or found on sites like <a rel="noreferrer noopener" aria-label="LottieFiles (opens in a new tab)" href="https://lottiefiles.com/" target="_blank">LottieFiles</a>. We add a <code>Click</code> handler that starts the animation or resets the animation state back to the first frame when we want to unlike the item. This gives</p>

<p><!-- wp:image {"id":1271,"align":"center"} --></p>
<div class="wp-block-image">
<figure class="aligncenter"><img src="/images/posts/chamelon.gif" alt="" class="wp-image-1271"/></figure>
</div>
<h3>Code &amp; tools</h3>
<p>You can find the code here: <a href="https://github.com/sthewissen/KickassUI.Chameleon" target="_blank" rel="noreferrer noopener" aria-label="https://github.com/sthewissen/KickassUI.Chameleon (opens in a new tab)">https://github.com/sthewissen/KickassUI.Chameleon</a>. If there's something in there that you think can be done better in a different way or found a bug; feel free to submit a PR. I'm always looking to learn :)</p>


<p>The following tools were used to create this app:</p>
<ul>
<li>FFImageLoading &ndash; Caching and transforming images &ndash;&nbsp;<a href="https://github.com/luberda-molinet/FFImageLoading">https://github.com/luberda-molinet/FFImageLoading</a></li>
<li>LiveXAML &ndash; Live simulator updates for your XAML code &ndash;&nbsp;<a href="http://www.livexaml.com/">http://www.</a><a rel="noreferrer noopener" aria-label="l (opens in a new tab)" href="http://www.livexaml.com/" target="_blank">l</a><a href="http://www.livexaml.com/">ivexaml.com</a></li>
<li>Lottie - Cross-platform animations -&nbsp;<a rel="noreferrer noopener" aria-label=" (opens in a new tab)" href="https://airbnb.design/lottie/" target="_blank">https://airbnb.design/lottie/</a> - <a rel="noreferrer noopener" aria-label="https://github.com/martijn00/LottieXamarin (opens in a new tab)" href="https://github.com/martijn00/LottieXamarin" target="_blank">https://github.com/martijn00/LottieXamarin</a></li>
<li>Xamarin Essentials - Common cross-platform APIs -&nbsp;<a rel="noreferrer noopener" aria-label=" (opens in a new tab)" href="https://docs.microsoft.com/en-us/xamarin/essentials/" target="_blank">https://docs.microsoft.com/en-us/xamarin/essentials/</a></li>
</ul>
<p><!-- /wp:list --></p>
